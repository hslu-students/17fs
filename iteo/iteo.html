<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="style.css" type="text/css" />
</head>
<body>
<div id="header">
<h1 class="title">IT-System Engineering \& Operation</h1>
<h2 class="author">Patrick Bucher</h2>
</div>
<div id="TOC">
<ul>
<li><a href="#das-data-center"><span class="toc-section-number">1</span> Das Data Center</a><ul>
<li><a href="#bestandteile-data-center"><span class="toc-section-number">1.1</span> Bestandteile Data Center</a></li>
<li><a href="#klimatisierung"><span class="toc-section-number">1.2</span> Klimatisierung</a></li>
<li><a href="#edv-einbau"><span class="toc-section-number">1.3</span> EDV-Einbau</a></li>
<li><a href="#kritische-punkte"><span class="toc-section-number">1.4</span> Kritische Punkte</a></li>
<li><a href="#überwachungsgebiete"><span class="toc-section-number">1.5</span> Überwachungsgebiete</a></li>
<li><a href="#rechenzenter-effizienz-pue-faktor"><span class="toc-section-number">1.6</span> Rechenzenter-Effizienz, PUE-Faktor</a></li>
<li><a href="#repetitionsfragen"><span class="toc-section-number">1.7</span> Repetitionsfragen</a></li>
<li><a href="#verfügbarkeitsverbesserungen"><span class="toc-section-number">1.8</span> Verfügbarkeitsverbesserungen</a><ul>
<li><a href="#service-level-agreement"><span class="toc-section-number">1.8.1</span> Service Level Agreement</a></li>
<li><a href="#availability-environment-classification"><span class="toc-section-number">1.8.2</span> Availability Environment Classification</a></li>
<li><a href="#repetitionsfragen-1"><span class="toc-section-number">1.8.3</span> Repetitionsfragen</a></li>
</ul></li>
<li><a href="#tier-levels"><span class="toc-section-number">1.9</span> Tier-Levels</a><ul>
<li><a href="#rechercheaufgaben"><span class="toc-section-number">1.9.1</span> Rechercheaufgaben</a></li>
</ul></li>
<li><a href="#informaton-lifecycle-management"><span class="toc-section-number">1.10</span> Informaton Lifecycle Management</a><ul>
<li><a href="#repetitionsfragen-2"><span class="toc-section-number">1.10.1</span> Repetitionsfragen</a></li>
</ul></li>
<li><a href="#tiered-storage"><span class="toc-section-number">1.11</span> Tiered Storage</a><ul>
<li><a href="#übung-allocation-efficiency"><span class="toc-section-number">1.11.1</span> Übung Allocation Efficiency</a></li>
</ul></li>
</ul></li>
<li><a href="#netzwerke-im-rechenzentrum"><span class="toc-section-number">2</span> Netzwerke im Rechenzentrum</a></li>
<li><a href="#virtualisierung-im-data-center"><span class="toc-section-number">3</span> Virtualisierung im Data Center</a><ul>
<li><a href="#smp-symmetrische-multiprozessoren"><span class="toc-section-number">3.1</span> SMP: Symmetrische Multiprozessoren</a><ul>
<li><a href="#vorteile-von-smp"><span class="toc-section-number">3.1.1</span> Vorteile von SMP</a></li>
<li><a href="#smp-organisation"><span class="toc-section-number">3.1.2</span> SMP-Organisation</a></li>
</ul></li>
<li><a href="#multi-core-prozessoren"><span class="toc-section-number">3.2</span> Multi-Core-Prozessoren</a><ul>
<li><a href="#architekturen"><span class="toc-section-number">3.2.1</span> Architekturen</a></li>
</ul></li>
<li><a href="#speicherorganisation"><span class="toc-section-number">3.3</span> Speicherorganisation</a><ul>
<li><a href="#llc-last-level-cache"><span class="toc-section-number">3.3.1</span> LLC: last level cache</a></li>
</ul></li>
<li><a href="#simultanes-multi-threading"><span class="toc-section-number">3.4</span> Simultanes Multi-Threading</a><ul>
<li><a href="#memory-stalls"><span class="toc-section-number">3.4.1</span> Memory Stalls</a></li>
<li><a href="#superskalare-architektur"><span class="toc-section-number">3.4.2</span> Superskalare Architektur</a></li>
<li><a href="#amdahls-gesetz"><span class="toc-section-number">3.4.3</span> Amdahls Gesetz</a></li>
<li><a href="#cache-kohärenz"><span class="toc-section-number">3.4.4</span> Cache-Kohärenz</a></li>
</ul></li>
<li><a href="#verbindungsnetzwerke"><span class="toc-section-number">3.5</span> Verbindungsnetzwerke</a><ul>
<li><a href="#bewertungskriterien-für-topologien"><span class="toc-section-number">3.5.1</span> Bewertungskriterien für Topologien</a></li>
</ul></li>
<li><a href="#skalierbare-applikationen"><span class="toc-section-number">3.6</span> Skalierbare Applikationen</a></li>
</ul></li>
<li><a href="#glossar"><span class="toc-section-number">4</span> Glossar</a></li>
</ul>
</div>
<h1 id="das-data-center"><span class="header-section-number">1</span> Das Data Center</h1>
<h2 id="bestandteile-data-center"><span class="header-section-number">1.1</span> Bestandteile Data Center</h2>
<ul>
<li>Lüftung (Zu- und Abluft, Wärmetauscher)</li>
<li>Hochwasserschutz (erhöhte Bauweise)</li>
<li>Zutrittskontrolle an den Eingängen, Überwachungskameras</li>
<li>Stromversorgung
<ul>
<li>USV: unterbrechungsfreie Stromversorgung (Energiespeicher: Batterien)</li>
<li>Dieselgenerator als Notstromaggregat (Energiespeicher: Dieseltank), mit Kühlung und Abluft</li>
</ul></li>
<li>Server in Serverracks</li>
<li>Stromverteilung</li>
<li>Datenleitung/Netzwerk</li>
<li>Löschanlagen</li>
<li>Administration/Überwachung</li>
</ul>
<h2 id="klimatisierung"><span class="header-section-number">1.2</span> Klimatisierung</h2>
<ul>
<li>optimale Temperatur: 26°C
<ul>
<li>keine Schäden bei leicht erhöhter Raumtemperatur (gegenüber 21°C)</li>
<li>Wärmeenergie geht von selber an die Umgebung (Heizung benachbarter Räumlichkeiten)</li>
<li>im optimalen Leistungsbereich der Klimaanlagen</li>
<li>Kondenswasser bei zu tiefen Temperaturen</li>
</ul></li>
<li>Staub und Pollen können schädlich sein
<ul>
<li>verstopfen Ventilatoren (gesteigerter Stromverbrauch durch erhöhte Kühlleistung)</li>
<li>Metallpartikel können Schäden an Hardware verursachen</li>
</ul></li>
<li>Probleme
<ul>
<li>Kondenswasser: Ablauf kann verstopfen, Kondenswasser auslaufen</li>
<li>Filterkontrolle: verstopfte Filter verursachen erhöhte Leistungsaufnahme</li>
<li>zusätzlicher Energieverbrauch</li>
<li>Luftverteilung</li>
<li>Überwachung</li>
</ul></li>
<li>Kühlluftverteilung
<ol style="list-style-type: decimal">
<li>Free-Flow-Systeme
<ul>
<li>Warme Luft steigt auf, kalte Luft sinkt ab</li>
<li>Gemischte Lufttemperatur</li>
<li>einfach</li>
<li>Problem: möglicher Wärmekurzschluss (warme Abluft wird als Kühlluft angesogen)</li>
</ul></li>
<li>Kalt- oder Warmgang-Einhausung
<ul>
<li>Trennung von Warm- und Kaltluft</li>
<li>dadurch bessere Energieeffizienz</li>
<li>aber teurer im Aufbau</li>
<li>Front der Racks sollten komplett abgeschlossen sein, um Warm- und Kaltluft voneinander zu trennen</li>
</ul></li>
</ol></li>
<li>Immersion Cooling: flüssigkeitsgekühlte Systeme
<ul>
<li>mit Wärmetauscher und Flüssigkeit in Leitungskabel</li>
<li>oder komplett in Öl eingelegt</li>
</ul></li>
</ul>
<h2 id="edv-einbau"><span class="header-section-number">1.3</span> EDV-Einbau</h2>
<ul>
<li>Serverracks
<ul>
<li>verschiedene Höhen (21-49U), Breiten (0.6-1m) und Tiefen (0.8-1.2m)
<ul>
<li>1 HE = 1 U = 1.75 Zoll = 44.45 mm</li>
</ul></li>
<li>auch mit integrierter Kühlung</li>
<li>Zuleitungen: oben, unten, seitlich</li>
<li>Standard: 19 Zoll (48.26 cm)</li>
</ul></li>
<li>Netzwerk
<ul>
<li>Kupfer (gegenwärtig stark verbreitet)</li>
<li>Glasfaser (löst Kupfer derzeit ab)</li>
</ul></li>
<li>Klimageräte, USV und Batterieschränke
<ul>
<li>Batterien sind sehr schwer, spezielle Racks/Bodenverstärkung erforderlich</li>
</ul></li>
<li>Kühlleitungen und Überwachungsgeräte</li>
</ul>
<h2 id="kritische-punkte"><span class="header-section-number">1.4</span> Kritische Punkte</h2>
<ul>
<li>Einbruch, Diebstahl, Vandalismus, Sturmschäden, Trümmer
<ul>
<li>bauliche Massnahmen: stabile Aussenhülle</li>
<li>verschlossen mit Zaun</li>
<li>teilweise fernab von anderen Gebäuden</li>
<li>keine oder kaum Fenster</li>
</ul></li>
<li>Fremdzugriff
<ul>
<li>Zutrittskontrolle (biometrisch, Chip-Karten, Passwörtern)</li>
<li>Abhörsicherheit (elektromagnetische Abschirmung, keine mobilen Endgeräte mit Netzwerkverbingungen zulassen, keinen WiFi-Access-Point)</li>
<li>Firewall</li>
</ul></li>
<li>Feuer und Rauch
<ul>
<li>Branderkennung</li>
<li>Löschanlage: CO2 (Vorwarnzeit zur Flucht nötig!), Verringerung des Sauerstoffanteils der Luft auf ca. 10% (nicht tödlich, aber das Feuer verlöscht) durch Stickstoff (gefährlicher und günstig) oder Inergen (weniger gefährlich und teurer)</li>
<li>Handfeuerlöscher: CO2
<ul>
<li>Feuer benötigt: Sauerstoff, Hitze und Brennstoff</li>
</ul></li>
<li>Abschottung einzelner Zellen</li>
<li>automatische Abschaltung der Klimaanlage damit der Rauch nicht verteilt wird</li>
<li>kein PVC (bildet Salzsäure!) verwenden</li>
</ul></li>
<li>Netzausfälle, Netzstörungen
<ul>
<li>Netzfilter (in Netzteilen integriert)</li>
<li>vorgeschaltete USV mit Batterien</li>
<li>Diesel-Generatoren</li>
</ul></li>
<li>Elektromagnetische Störfelder
<ul>
<li>EMP: elektromagnetische Impulse (durch Atombomben oder spezielle Generatoren verursacht), kann Geräte zerstören</li>
<li>Abschirmung (kann teuer sein)</li>
<li>metallische Aussenfassade</li>
<li>Blitzableiter</li>
</ul></li>
<li>Staub, Schmutz, Wasser
<ul>
<li>Filteranlagen</li>
<li>Schmutzschleusen, spezielle Teppiche</li>
<li>erhöhte Bauweise</li>
<li>Standortwahl (nicht in Nähe von Gewässern oder mit Steinschlag und Lawinen)</li>
<li>Pumpanlagen zum Abpumpen bei Überschwemmungen</li>
</ul></li>
</ul>
<h2 id="überwachungsgebiete"><span class="header-section-number">1.5</span> Überwachungsgebiete</h2>
<ul>
<li>Gebäude
<ul>
<li>Türen (offen/geschlossen)</li>
<li>Kameras</li>
<li>Bewegungsmelder</li>
<li>Zutritte</li>
</ul></li>
<li>Räume
<ul>
<li>Temperatur</li>
<li>Luftfeuchtigkeit</li>
<li>Bewegung</li>
<li>Rauch</li>
<li>Brand</li>
<li>Wasserlecks</li>
</ul></li>
<li>Energieversorgung
<ul>
<li>Netzausfall</li>
<li>Strom, Spannung, Leistung</li>
<li>Leistungsfaktor (Kosinus Phi)</li>
</ul></li>
<li>Geräte
<ul>
<li>Niederspannungsverteilungen</li>
<li>Schalterstellungen (Ein/Aus)</li>
<li>Stromverbrauch einzerlner Bereiche</li>
<li>Sicherungsausfall</li>
<li>Kurzschluss</li>
<li>Überlast</li>
</ul></li>
<li>Generator
<ul>
<li>Kraftstoffstand (Dieseltank)</li>
<li>Funktionsbereitschaft</li>
<li>Temperatur</li>
<li>Überlast</li>
</ul></li>
<li>Klimageräte
<ul>
<li>Temperaturen</li>
<li>Luftfeuchtigkeit</li>
<li>Übertemperatur</li>
<li>Filterwiderstand</li>
<li>Störungen</li>
</ul></li>
<li>USV-Anlagen
<ul>
<li>Normalbetrieb</li>
<li>Batteriebetrieb</li>
<li>Bypass-Betrieb</li>
<li>Ladezustand</li>
<li>Batterietemperatur</li>
</ul></li>
<li>Brandmelde- und Löschanlage (Zustandsanzeigen)
<ul>
<li>Löschanlage ausgelöst</li>
<li>Übertragungseinrichtung ausgeschaltet</li>
<li>Störung</li>
<li>Service</li>
</ul></li>
</ul>
<h2 id="rechenzenter-effizienz-pue-faktor"><span class="header-section-number">1.6</span> Rechenzenter-Effizienz, PUE-Faktor</h2>
<ul>
<li>PUE: Power Usage Effectiveness</li>
<li>Massstab für die Effizienz eines Rechenzentrums</li>
<li>PUE = gesamte vom Rechenzentrum verbrauchte Energie / Verbrauch der IT-Geräte
<ul>
<li>1.0: optimal (in kalten Regionen möglich)</li>
<li>1.2: guter Wert (normale Rechenzentren)</li>
<li>über 1.4: Optimierungsbedarf</li>
</ul></li>
<li>Stichwort “Green IT”</li>
</ul>
<h2 id="repetitionsfragen"><span class="header-section-number">1.7</span> Repetitionsfragen</h2>
<ol style="list-style-type: decimal">
<li>Notieren Sie zu 5 beliebigen Bausteinen eines Rechenzentrums die folgenden Punkte:</li>
</ol>
<table>
<colgroup>
<col width="21%" />
<col width="21%" />
<col width="25%" />
<col width="31%" />
</colgroup>
<thead>
<tr class="header">
<th>Baustein</th>
<th>Funktionen</th>
<th>Gefährdet durch</th>
<th>Abhilfe gegen Gefährdungen</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Gebäude</td>
<td>Schutz der Server vor äusseren Einflüssen</td>
<td>Umweltkatastrophen</td>
<td>Resistente Bauweise</td>
</tr>
<tr class="even">
<td>Klimatisierung</td>
<td>Schutz vor Überhitzung</td>
<td>Verunreinigung der Filter, Kondenswasser</td>
<td>Filterservice, Abpumpvorrichtung</td>
</tr>
<tr class="odd">
<td>Stromversorgung</td>
<td>Bereitstellung von elektrischer Energie</td>
<td>Stromausfälle, Netzschwankungen</td>
<td>USV mit Batterie, Diesel-Generatoren</td>
</tr>
<tr class="even">
<td>Netzwerk</td>
<td>Verbindung der Komponenten</td>
<td>Ausfall, Überlastung, Überhitzung, Brand</td>
<td>Redundanz, Datensicherung, Lastverteilung, Kühlung, Löschanlage</td>
</tr>
<tr class="odd">
<td>Eingangskontrolle</td>
<td>Gewährung und Verweigerung von Einlass</td>
<td>unautorisierte Personen</td>
<td>Biometrie, Überwachungskameras, Chipkarten, Passwörter, Personenkontrolle</td>
</tr>
</tbody>
</table>
<ol start="2" style="list-style-type: decimal">
<li>Versuchen Sie den Kostenanteil pro Baustein am gesamten RZ abzuschätzen.
<ul>
<li>Gebäude: ca. 10 Millionen CHF (92%)</li>
<li>Klimatisierung: ca. 250’000 CHF (2.3%)</li>
<li>Stromversorgung: ca. 100’000 CHF (1%)</li>
<li>Netzwerk: ca. 500’000 CHF (4.6%)</li>
<li>Eingangskontrolle: 25’000 CHF (0.2%)</li>
<li>Summe: 10’875’000 CHF (100%)</li>
</ul></li>
<li>Was ist der PUE Faktor und was sind die erreichbaren und effektiv erreichten Werte?
<ul>
<li>PUE bedeutet Power Usage Effectiveness und Massstab für die Effizienz eines Rechenzentrums. Er errechnet sich aus der gesamthaft durch das Rechenzentrum verbrauchten Energiemenge geteilt durch die gesamthaft von den IT-Geräten verbrauchte Energie.
<ul>
<li>1.0: optimal (in kalten Regionen möglich)</li>
<li>1.2: guter Wert (normale Rechenzentren)</li>
<li>über 1.4: Optimierungsbedarf</li>
</ul></li>
</ul></li>
</ol>
<h2 id="verfügbarkeitsverbesserungen"><span class="header-section-number">1.8</span> Verfügbarkeitsverbesserungen</h2>
<p>Kosten der Downtime pro Stunde:</p>
<ul>
<li>Fertigung: 28’000.-</li>
<li>Logistik: 90’000.-</li>
<li>Einzelhandel: 90’000.-</li>
<li>Home-Shopping: 113’000.-</li>
<li>Medien (pay per view): 1’100’000.-</li>
<li>Bank (Rechenzentrum): 2’500’000.-</li>
<li>Kreditkartenverarbeitung: 2’600’000.-</li>
<li>Broker: 6’500’000.-</li>
</ul>
<h3 id="service-level-agreement"><span class="header-section-number">1.8.1</span> Service Level Agreement</h3>
<p>Verfügbarkeit bei <code>7*24h</code>:</p>
<table>
<thead>
<tr class="header">
<th>Uptime in %</th>
<th>Downtime pro Jahr</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>90%</td>
<td>876 h (36.5 d)</td>
</tr>
<tr class="even">
<td>95%</td>
<td>438 h (18.25 d)</td>
</tr>
<tr class="odd">
<td>99%</td>
<td>87.6 h (3.65 d)</td>
</tr>
<tr class="even">
<td>99.9%</td>
<td>8.76 h</td>
</tr>
<tr class="odd">
<td>99.99%</td>
<td>52.56 min</td>
</tr>
<tr class="even">
<td>99.999%</td>
<td>5.256 min</td>
</tr>
<tr class="odd">
<td>99.9999%</td>
<td>31.536 sec</td>
</tr>
</tbody>
</table>
<p>Verfügbarkeit bei <code>5*9h</code> (zu Bürozeiten):</p>
<table>
<thead>
<tr class="header">
<th>Uptime in %</th>
<th>Downtime pro Jahr</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>90%</td>
<td>234.90 h (26.1 d)</td>
</tr>
<tr class="even">
<td>95%</td>
<td>117.45 h (13.05 d)</td>
</tr>
<tr class="odd">
<td>99%</td>
<td>23.49 h (2.61 d)</td>
</tr>
<tr class="even">
<td>99.9%</td>
<td>2.35 h</td>
</tr>
<tr class="odd">
<td>99.99%</td>
<td>14.09 min</td>
</tr>
<tr class="even">
<td>99.999%</td>
<td>1.14 min</td>
</tr>
<tr class="odd">
<td>99.9999%</td>
<td>8.46 sec</td>
</tr>
</tbody>
</table>
<p>Massnahmen zur Erhöhung der Verfügbarkeit:</p>
<ul>
<li>Spiegelung (inkl. Synchronisation)</li>
<li>Failover Cluster: Ausfall eines Hosts, der vom Client nicht bemerkt wird
<ul>
<li>zwei Hosts, die sich gegenseitig über Heartbeat kontrollieren</li>
<li>Client spricht zu einem vorgeschalteten Virtual Host</li>
<li>bei Ausfall springt der eine Host für den anderen ein</li>
<li>Automatischer Lastausgleich bei vielen Hosts</li>
</ul></li>
<li>Failover Datacenter: Ausfall eines ganzen Datacenters
<ul>
<li>Spiegelung der Datacenters</li>
<li>Backup und Produktivdaten über Kreuz, sodass bei einem Ausfall beide Datenbestände an einem Ort sind</li>
</ul></li>
<li>Asynchrone und synchrone Replikation
<ul>
<li>in Rechenzenter A wird eine Datenbank synchron auf eine lokale Instanz gespiegelt</li>
<li>in Rechenzenter B wird die Datenübertragung dann asynchron vorgenommen</li>
<li>Rechenzenter B ist im Standby-Betrieb</li>
</ul></li>
</ul>
<h3 id="availability-environment-classification"><span class="header-section-number">1.8.2</span> Availability Environment Classification</h3>
<ul>
<li>AEC-0: Conventional
<ul>
<li>Funktion kann unterbrochen werden</li>
<li>Datenintegrität nicht essentiell</li>
</ul></li>
<li>AEC-1: Highly Reliable
<ul>
<li>Funktion kann unterbrochen werden</li>
<li>Datenintegrität muss gewährtleistet sein</li>
</ul></li>
<li>AEC-2: High Availability
<ul>
<li>Funktion darf nur zu festgelegten Zeiten unterbrochen werden</li>
<li>Zu Hauptbetriebszeiten sind minimale Unterbrüche zulässig</li>
</ul></li>
<li>AEC-3: Fault Resilient
<ul>
<li>Funktion muss zu Hauptbetriebszeiten ununterbrochen aufrecht erhalten werden</li>
</ul></li>
<li>AEC-4: Fault Tolerant
<ul>
<li>Funktion muss ununterbrochen (24/7) aufrecht erhalten werden</li>
</ul></li>
<li>AEC-5: Disaster Tolerant
<ul>
<li>Funktion muss unter allen Umständen verfügbar sein</li>
</ul></li>
</ul>
<h3 id="repetitionsfragen-1"><span class="header-section-number">1.8.3</span> Repetitionsfragen</h3>
<ol style="list-style-type: decimal">
<li>Welche Verfügbarkeit muss im SLA festgehalten werden, wenn ich 1h Ausfallzeit während den Bürozeiten nicht überschreiten will?
<ul>
<li>99.9572% Verfügbarkeit, 8-17 Uhr von Mo-Fr CET</li>
</ul></li>
<li>Was versteht man unter Failover-Cluster-Services?
<ul>
<li>Eine automatische und für den Client transparente Umschaltung eines redundanten Hosts bei Störungen.</li>
</ul></li>
<li>Wenn z.B. das SAN gespiegelt werden soll, wie erhöhen sich die Kosten? 50%/100%/mehr als 100% und warum?
<ul>
<li>Mehr als 100%, weil die Anzahl der Verbindungen zwischen den einzelnen Komponenten sich mehr als verdoppelt.</li>
</ul></li>
</ol>
<h2 id="tier-levels"><span class="header-section-number">1.9</span> Tier-Levels</h2>
<ul>
<li>Tier I: Redundanz N: keine Redundanz, 28.8h Ausfallszeit pro Jahr</li>
<li>Tier II: Redundanz N+1: ein zusätzlicher Server, 22h Ausfallszeit pro Jahr</li>
<li>Tier III: Redundanz N+1: ein zusätzlicher Server, weitere Redundanzen in der Infrastruktur, 1.6h Ausfallszeit pro Jahr</li>
<li>Tier IV: Redundanz 2(N+1): ein zusätzlicher Server, alle Server doppelt, 0.8h Ausfallszeit pro Jahr</li>
</ul>
<h3 id="rechercheaufgaben"><span class="header-section-number">1.9.1</span> Rechercheaufgaben</h3>
<ol style="list-style-type: decimal">
<li>Suchen sie RZ-Services Anbieter mit Level 3, 3.5 und Level 4 Rechenzentren.
<ul>
<li>Tier III: <a href="https://www.infomaniak.com/de/datacenter-housing">infomaniak</a></li>
<li>Tier 3+: <a href="https://www.greendatacenter.ch/colocation/colo-standard.html">greeendatacenter</a></li>
<li>Tier IV: <a href="https://www.greendatacenter.ch/">greendatacenter</a></li>
</ul></li>
<li>Versuchen sie die Kosten für den Service zu bestimmen (pro Rack, pro Server, …).
<ul>
<li>monatlich CHF 450.- pro Monat und Rack (10 Server)</li>
<li>monatlich CHF 650.- pro Monat und Rack (? Server)</li>
<li>monatlich CHF 1250.- pro Monat und Rack (? Server)</li>
</ul></li>
</ol>
<h2 id="informaton-lifecycle-management"><span class="header-section-number">1.10</span> Informaton Lifecycle Management</h2>
<p>Datenzyklus:</p>
<ul>
<li>Create (erstellen)</li>
<li>Store (abspeichern)</li>
<li>Use (verwenden: einsehen, anpassen)</li>
<li>Share (weitergeben)</li>
<li>Archive (archivieren)</li>
<li>Destroy (löschen)</li>
</ul>
<p>ILM: Speicherstrategie zur Speicherung von Informationen <em>entsprechend ihrem Wert</em> auf dem jeweils günstigsten Speichermedium.</p>
<ul>
<li>Verwaltung und Speicherung orientieren sich an <em>Wichtigkeit</em>, <em>Wertigkeit</em> und <em>Kosten</em> der Daten.</li>
<li>Daten, Quellen und Speichersysteme werden <em>klassifiziert</em> (Speicherhierarchie).
<ul>
<li>Tier 1: SSD, Server-Festplatten (Fiber Channel Disc 15k rpm)</li>
<li>Tier 2: HDD,</li>
<li>Tier n: SATA-Festplatten</li>
<li>spezialisiert: Archivierung, Tapes, langsame Festplatten (disc to disc)</li>
</ul></li>
</ul>
<p>ILM-Management:</p>
<ul>
<li>Storage Management</li>
<li>Document Lifecycle Management</li>
<li>Content Lifecycle Management</li>
<li>Records Management</li>
</ul>
<p>Regeln legen fest, wie und wo Daten gespeichert werden:</p>
<ul>
<li>Änderungshäufigkeit</li>
<li>Zugriffsgeschwindigkeit</li>
<li>Zugriffshäufigkeit</li>
<li>Kosten</li>
<li>ökonimischer Wert</li>
<li>gesetzliche Bestimmungen</li>
</ul>
<p>Inaktive Daten:</p>
<ul>
<li>konsumieren Speicherplatz</li>
<li>werden gepflegt, gesichert, repliziert usw.</li>
<li>unterliegen rechtlichen und Datenhaltungsansprüchen</li>
<li>müssen im Katastrophenfall wiederhergestellt werden</li>
</ul>
<h3 id="repetitionsfragen-2"><span class="header-section-number">1.10.1</span> Repetitionsfragen</h3>
<ol style="list-style-type: decimal">
<li>Was versteht man unter Records Management?
<ul>
<li>Was soll wo und wie lange gespeichert und von wem eingesehen oder bearbeitet werden (rechtliche Aspekte).</li>
</ul></li>
<li>Welche (gesetzlichen) Vorschriften für die Datenaufbewahrungszeit kennen sie?
<ul>
<li>3 Jahre für intern relevante Daten</li>
<li>10 Jahre für Rechnungen, Geschäftsabschlüsse</li>
<li>20 Jahre bei börsenkotierten Unternehmen</li>
</ul></li>
<li>Wer soll das Records-Management (RM) anordnen und durchsetzen?
<ul>
<li>Rechtsabteilung: sanktionieren</li>
<li>Geschäftsleitung: anordnen</li>
<li>Abteilungsleiter: durchsetzen</li>
<li>Administratoren: ausführen</li>
</ul></li>
<li>Kennen sie aus der eigenen Umgebung Beispiele?
<ul>
<li>keine Positivbeispiele</li>
</ul></li>
</ol>
<h2 id="tiered-storage"><span class="header-section-number">1.11</span> Tiered Storage</h2>
<p>Daten können nach Nutzung auf verschiedener Hardware gespeichert werden:</p>
<ul>
<li>SSD: fast</li>
<li>DAS/SAN: active</li>
<li>HDFS/NAS: historical</li>
<li>Amazon S3/HDFS/NAS: archived (on- or offline)</li>
</ul>
<p>Verschiedene Datenklassen werden auf verschiedene Speicherklassen gespeichert:</p>
<ol style="list-style-type: decimal">
<li>mission critical data (z.B. Online-Datenbank mit Bestellwesen)</li>
<li>business critical data (Daten, die immer zur Verfügung stehen müssen)</li>
<li>nearline or historical data (z.B. alte Pläne in einem Architekturbüro zum gelegentlichen Nachschauen)</li>
<li>offline data (z.B. Backups und Daten, die nur aufgrund gesetzlicher Bestimmung aufbewahrt werden)</li>
</ol>
<p>TODO p.41-44</p>
<p>MAID: massive array of idle disks (Festplatten können zum Stromsparen heruntergefahren werden und/oder langsamer laufen)</p>
<p>RTO: recovery time objectives (Ziele betreffend Dauer der Rückspielbarkeit einer Datensicherun einer Datensicherung) RPO: recovery point objectives (Ziele betreffend Dauer zwischen Datensicherungen)</p>
<h3 id="übung-allocation-efficiency"><span class="header-section-number">1.11.1</span> Übung Allocation Efficiency</h3>
<p>Alloziert: Allokation von 80% bedeutet, dass bei 5 RAID-Platten 4 verwendet und 1 für Redundanz benötigt wird</p>
<p>Je höher die Belegung, desto höher der Yield (die Ausbeute). TODO: p.47</p>
<p>[Siehe Tabelle mit Berechnung]</p>
<h1 id="netzwerke-im-rechenzentrum"><span class="header-section-number">2</span> Netzwerke im Rechenzentrum</h1>
<p>Netzwerktopologie:</p>
<ul>
<li>Provider
<ul>
<li>Angebot</li>
<li>Speed</li>
<li>Technik</li>
</ul></li>
<li>Grenze
<ul>
<li>Router</li>
<li>Firewall</li>
<li>IDP (Intrusion Detection and Protection)</li>
<li>Redundanz</li>
</ul></li>
<li>DMZ (Demilitarized Zone)
<ul>
<li>Web-Services</li>
<li>Authentifizierung</li>
<li>Dienste</li>
</ul></li>
<li>Lokales Netzwerk (LAN)
<ul>
<li>Topologien</li>
<li>Speed</li>
<li>Trennungen</li>
<li>Services</li>
</ul></li>
</ul>
<p>Private IP-Bereiche:</p>
<ul>
<li>10.0.0.0/8</li>
<li>172.16.0.0/12</li>
<li><p>192.168.0.0/16</p></li>
<li>Router
<ul>
<li>oft in Firewall oder Layer-3-Switches eingebaut</li>
<li>Arbeitet mit IP-Paketen, setzt öffentliche in private Adressen um (NAT)</li>
<li>Anbendung verschiedener Netze</li>
<li>optionale Weiterleitung bei redundanten Leitungen</li>
<li>Aufrechterhaltung von QOS durch spezifische Weiterleitungen (aufgrund Pakettyp, Protokoll)</li>
<li>kann VPN-Endpunkt sein</li>
<li>Anpassung an unterschiedliche Netzwerktechniken</li>
</ul></li>
<li>Firewall
<ul>
<li>Sicherheitsbaustein, Teil des Sicherheitskonzepts</li>
<li>Übernimmt meist auch Routing-Funktionen</li>
<li>regelbasierte Sperrung/Weiterleitung von Paketen</li>
<li>VPN-Endpunkt mit Authentifizierung</li>
<li>kann auf allen OSI-Schichten arbeiten</li>
</ul></li>
<li>IDP
<ul>
<li>IDS (Intrusion Detection System) + IDP (Intrusion Prevention System) = IDP (Intrusion Detection and Protection)</li>
<li>Eindringungsversuche erkennen (Muster, DOS, Fakes, Portscan, IP-Spoofing)</li>
<li>Rechenintensiv, oft separate Hardware</li>
<li>über 1Gbit/s-Netzwerke können nicht komplett überwacht werden (mehrere Geräte oder Heuristik)</li>
</ul></li>
<li>DMZ
<ul>
<li>demilitarized zone</li>
<li>Geschützer Bereich, in dem bestimmte Zugriffe (www, Mail, FTP) erlaubt weden</li>
<li>1 oder 2 Firewalls</li>
<li>Model 1: eine Firewall, an der Internet, DMZ und Inside-Zone hängen</li>
<li>Model 2: zwei Firewalls: Internet, Firewall, DMZ, Firwall, Inside Zone</li>
<li>bei Banken müssen die beiden Firewalls verschiedener Hersteller sein</li>
</ul></li>
<li>Netzwerk-Redundanz
<ul>
<li>1 Provider/2 Zugänge</li>
<li>2 Provider/je 1 Zugang</li>
<li>Ausfallüberwachung nötig</li>
<li>Getrennte Wege</li>
<li>verschiedene Medien</li>
<li>Loadbalancing</li>
</ul></li>
<li>LAN-Strukturen (physisch)
<ul>
<li>TOR: top of rack (jedes Rack hat seine eigenen Switches)
<ul>
<li>neue Switches für jedes neue Rack notwendig</li>
</ul></li>
<li>EOR: end of row (Racks nur über Patchpanels verbunden)
<ul>
<li>einfacher, solange genügend Ports vorhanden sind (aber mehr Verkabelungsaufwand nötig)</li>
</ul></li>
</ul></li>
<li>LAN-Strukturen
<ul>
<li>mehrere Switch-Ebenen</li>
<li>peering/peripherie</li>
<li>backbone/spine/core</li>
<li>leaf (Anschluss für Server)</li>
</ul></li>
<li>MPLS: multiprotocol label switching
<ul>
<li>VPN-ähnliche Strukturen zur Verbindung zusammengehöriger Netzwerke ohne Rücksicht auf IP-Segmente</li>
<li>Paketvermittlung durch den Provider aufgrund von Labels in den Paketen
<ul>
<li>QOS (quality of service)</li>
<li>COS (class of service)
<ul>
<li>realtime (voice)</li>
<li>best effort</li>
<li>bulk (grosse Mengen)</li>
<li>business critical</li>
<li>video</li>
</ul></li>
</ul></li>
</ul></li>
<li>SDN: Software Defined Networking
<ul>
<li>zwei Ebenen
<ul>
<li>Control Plane</li>
<li>Data Plane</li>
</ul></li>
<li>Netzwerke werden via Management-Software erstellt</li>
<li>Netze sind teilweise virtuell basierend auf einem Trägernetzwerk und werden mit speziellen Protokollen konfiguriert und verbunden (möglicher Standard: Openflow)</li>
</ul></li>
<li>VLAN: virtual LAN
<ul>
<li>Bildung getrennter Netze auf gemeinsamer Hardware</li>
<li>tagged oder untagged</li>
<li>Trunk: Verbindung zweier Switches</li>
</ul></li>
</ul>
<h1 id="virtualisierung-im-data-center"><span class="header-section-number">3</span> Virtualisierung im Data Center</h1>
<h2 id="smp-symmetrische-multiprozessoren"><span class="header-section-number">3.1</span> SMP: Symmetrische Multiprozessoren</h2>
<ul>
<li>zwei oder mehr gleichartige Prozessoren mit vergleichbaren Möglichkeiten</li>
<li>Prozessoren zeilen sich das Memory und sind über einen Bus oder andere interne Verbindungen zusammengeschaltet</li>
<li>Prozessoren teilen sich I/O-Geräte</li>
<li>Alle Prozessoren können die gleichen Funktionen ausführen (daher “symmetrisch”)</li>
<li>System wird durch ein integriertes OS (Microcode auf dem Chip) kontrolliert
<ul>
<li>stellt Interaktion zwischen Prozessoren und deren Programmen her</li>
<li>auf Stufe Job, Task, File und Daten-Elementen</li>
</ul></li>
</ul>
<h3 id="vorteile-von-smp"><span class="header-section-number">3.1.1</span> Vorteile von SMP</h3>
<ul>
<li>Performance durch parallele Ausführung</li>
<li>Skalierbarkeit durch Geräte mit unterschiedlichem Preis-Leistungs-Verhältnis</li>
<li>Verfügbarkeit</li>
<li>TODO p.6</li>
</ul>
<h3 id="smp-organisation"><span class="header-section-number">3.1.2</span> SMP-Organisation</h3>
<ul>
<li>L1- und L2-Cache auf dem Prozessor</li>
<li>L3-Cache geteilt</li>
<li>Prozessoren über Bussystem verbunden</li>
</ul>
<h2 id="multi-core-prozessoren"><span class="header-section-number">3.2</span> Multi-Core-Prozessoren</h2>
<ul>
<li>bekannt als Chip-Multiprozessor</li>
<li>zwei oder mehr Cores auf einem Chip</li>
<li>jeder Core beinhaltet alle Komponenten eines unabhängigen Prozessors
<ul>
<li>auch L1- und L2-Cache</li>
</ul></li>
</ul>
<h3 id="architekturen"><span class="header-section-number">3.2.1</span> Architekturen</h3>
<p>Mit steigender Anzahl Cores wird die Verbindung zwischen den Cores immer kritischer.</p>
<ul>
<li>Kommunikationsmodell
<ul>
<li>Message Passing: experimentell</li>
<li>Shared Address</li>
</ul></li>
<li>Physische Verbindung
<ul>
<li>Network</li>
<li>Bus: schlechte Skalierbarkeit</li>
</ul></li>
</ul>
<h2 id="speicherorganisation"><span class="header-section-number">3.3</span> Speicherorganisation</h2>
<ul>
<li>UMA: unified memory architecture
<ul>
<li>mehrere CPUs an ein gemeinsames Memory angeschlossen</li>
<li>alle CPUs haben Direktzugriff</li>
<li>jede CPU hat einen lokalen Adressraum (schlechte Skalierbarkeit)</li>
</ul></li>
<li>NUMA: non-unified memory architecture (shared memory architecture)
<ul>
<li>zwei oder mehr SMPs physisch verbunden</li>
<li>Shared Memory: ein globaler Adressraum</li>
<li>SMP kann direkt auf das Memory anderer SMPs zugreifen</li>
<li>nicht alle CPUs haben die gleiche Zugriffszeit auf das Memory
<ul>
<li>variiert je nach Speicheradresse</li>
<li>je weiter weg das Memory, desto langsamer der Zugriff</li>
</ul></li>
<li>CC-NUMA: mit Cache-Kohärenz (cache coherence)</li>
</ul></li>
</ul>
<h3 id="llc-last-level-cache"><span class="header-section-number">3.3.1</span> LLC: last level cache</h3>
<p>TODO p. 17</p>
<h2 id="simultanes-multi-threading"><span class="header-section-number">3.4</span> Simultanes Multi-Threading</h2>
<p>Hauptprobleme bei Multi-Core-Architekturen:</p>
<ol style="list-style-type: decimal">
<li>Memory-Stalls</li>
<li>Cache-Kohärenz</li>
</ol>
<h3 id="memory-stalls"><span class="header-section-number">3.4.1</span> Memory Stalls</h3>
<p>Zeitanteil, der für das Warten auf die Daten ins Memory benötigt wird. Beispiel:</p>
<ul>
<li>Transaktionsdatenbank: ca. 75%</li>
<li>Web-Server: ca. 50%</li>
<li>Entscheidungsunterstützte (mittels Machine-Learning, “trainierte Algorithmen”) Datenbank: ca. 10-50%</li>
</ul>
<p>Analogie-Beispiel: betrüge ein einziger CPU-Zyklus eine Sekunde statt 0.3 Nanosekunden, so dauerte das Laden:</p>
<ul>
<li>aus dem L1-Cache: 3 Sekunden</li>
<li>aus dem L3-Cache: 45 Sekunden</li>
<li>aus dem DRAM: 6 Minuten</li>
<li>von einer HD: Monate oder Jahre</li>
</ul>
<p>Lösungsansatz: Threads (kleinste Einheit, die ein OS auf Cores verteilen kann). Während ein Thread darauf wartet, dass Daten ins Memory geladen werden, kann derweil ein anderer Thread arbeiten, statt zu warten (Multithreading oder Pipelining); Reduktion um ca. 50% der Idle-Time.</p>
<h3 id="superskalare-architektur"><span class="header-section-number">3.4.2</span> Superskalare Architektur</h3>
<ul>
<li>Es werden mehrere Instruktionen pro Taktzyklus abgearbeitet.</li>
<li>Dazu müssen mehrere Ausführungseinheiten (z.B. ALU, Bit Shifter, Multiplier) pro Chip vorhanden sein.</li>
<li>Im besten Fall sind zur gleichen Zeit alle Ausführungseinheiten beschäftigt.</li>
<li>Das ist nach dem Aufbau/Füllen bzw. vor dem Abbau/Leeren der Pipeline möglich.</li>
<li>Nachteil von Pipelining: bedingte Codeblöcke werden immer in die Pipeline geladen, auch wenn sie teilweise gar nicht gebraucht werden, und müssen teilweise geflusht werden.</li>
<li>Hyper-Threading: Synomym für Pipelining</li>
</ul>
<h3 id="amdahls-gesetz"><span class="header-section-number">3.4.3</span> Amdahls Gesetz</h3>
<ul>
<li>Ab einer gewissen Anzahl Cores nimmt die zusätzliche Leistung pro weiterem Core ab
<ul>
<li>nicht parallelisierter Anteil <code>a</code>: ca. 20%</li>
<li>parallelisierter Anteil <code>1-a</code>: ca. 80%</li>
</ul>
<p>a = nicht parallelisierter Anteil n = Anzahl Cores T = Ausführungszeit</p>
<p>T=a+(a-a)/n</p></li>
</ul>
<p>T konvergiert für grosse n gegen 0.2 für einen nicht parallelisierten Anteil von 20%.</p>
<h3 id="cache-kohärenz"><span class="header-section-number">3.4.4</span> Cache-Kohärenz</h3>
<ul>
<li>gemeinsames Datenobjekt in beiden Caches und im Memory</li>
</ul>
<ol style="list-style-type: decimal">
<li>write through cache</li>
<li>write back cache</li>
</ol>
<p>TODO: p.38-39</p>
<p>Lösungsansätze:</p>
<ol style="list-style-type: decimal">
<li>Erweiterung der beiden genannten Algorithmen
<ul>
<li>Snoop-Protokoll
<ul>
<li>Zugriffe erfolgen über das gleiche Medium (Bus-System)</li>
<li>Cache-Controller beobachten und erkennen Datenänderungen</li>
<li>skaliert schlecht</li>
<li>TODO: p.44</li>
</ul></li>
<li>Directory-Protokoll
<ul>
<li>zentrale Liste mit Status aller Cache-Blöcke (welche CPU hat was?)</li>
<li>skaliert besser</li>
<li>TODO: p.45-47</li>
</ul></li>
</ul></li>
<li>Verwendung eines gemeinsamen Caches</li>
<li>Unterteilung der Daten (auf Softwareebene)</li>
</ol>
<h2 id="verbindungsnetzwerke"><span class="header-section-number">3.5</span> Verbindungsnetzwerke</h2>
<ul>
<li>Bei 1000 Cores bräuchte es 10^6 Verbindungen zwischen den Cores.</li>
<li>Jede Verbindung müsste 64 Bit breit sein.</li>
<li>Es bräuchte <code>6.4*10^7</code> Leitungen.</li>
<li>Bei einer 100-lagigen Platine ergäbe das eine Platinenbreite von 6 km.</li>
<li>Es ist nicht praktikabel, alle Cores miteinander zu verbinden!</li>
</ul>
<p>TODO: p.50</p>
<p>Lösung: Verbindungsnetzwerke. Die Cores werden über geschaltete Verbindungen (Switches) miteinander verbunden.</p>
<p>TODO: p.52</p>
<h3 id="bewertungskriterien-für-topologien"><span class="header-section-number">3.5.1</span> Bewertungskriterien für Topologien</h3>
<p>TODO: p.53-62</p>
<p>“Koppelnetze sind gekoppelte Netze” – “Nein” – “Doch” – “Ohh”</p>
<h2 id="skalierbare-applikationen"><span class="header-section-number">3.6</span> Skalierbare Applikationen</h2>
<p>Wie erstellt man skalierbare Applikationen?</p>
<ul>
<li>skalierbare Algorithmen</li>
<li>feingranulare Locking-Mechanismen verwenden</li>
<li>Worker-Thread-Pools verwenden</li>
<li>Skalierungs-Tests durchführen</li>
<li>Beobachtung der Applikation</li>
<li>Stellen mit Wartezeiten identifizieren</li>
<li>Synchronisations-Locks identifizieren</li>
<li>nicht-skalierbare Algorithmen identifizieren</li>
</ul>
<p>TODO: p.65 ff</p>
<h1 id="glossar"><span class="header-section-number">4</span> Glossar</h1>
<ul>
<li>ITIL: IT Infrastructure Library, Standard für IT-Belange v.a. für Grossunternehmen, für KMU übertrieben</li>
<li>PUE: Power Usage Effectiveness, Massstab für die Effizienz eines Rechenzentrums</li>
<li>DNS: Domain Name System</li>
<li>IPAM: IP Address Management</li>
<li>DHCP: Dynamic Host Configuration Protocoll</li>
<li>NAP: Network Access Protection</li>
<li>NAC: Network Access Control</li>
</ul>
</body>
</html>
